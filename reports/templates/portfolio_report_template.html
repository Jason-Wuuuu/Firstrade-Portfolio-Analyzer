<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfolio Analysis Report - {date}</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
      /* CSS_PLACEHOLDER */
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Portfolio Analysis Report - {date}</h1>

      <div id="portfolio-growth" class="plot section">
        <h2>Portfolio Growth</h2>
        {portfolio_growth_plot}
      </div>

      <div id="portfolio-analysis" class="section">
        <h2>Portfolio Summary</h2>
        <div id="portfolio-summary">
          <table class="summary-table">
            <tr>
              <th>Metric</th>
              <th>Value</th>
            </tr>
            <tr>
              <td>Total Market Value</td>
              <td>{total_market_value}</td>
            </tr>
            <tr>
              <td>Cash</td>
              <td>{cash}</td>
            </tr>
            <tr>
              <td>Total Deposits</td>
              <td>{total_deposits}</td>
            </tr>
            <tr>
              <td>Unrealized Gain/Loss</td>
              <td>{unrealized_gain_loss}</td>
            </tr>
            <tr>
              <td>Total Realized Gains</td>
              <td>{total_realized_gains}</td>
            </tr>
            <tr>
              <td>Daily Gain</td>
              <td>{daily_gain}</td>
            </tr>
            <tr>
              <td>Total Return</td>
              <td>{total_return}</td>
            </tr>
            <tr>
              <td>Cumulative Return</td>
              <td>{cumulative_return}</td>
            </tr>
            <tr>
              <td>ROI</td>
              <td>{roi}</td>
            </tr>
          </table>
        </div>
      </div>

      <div id="position-analysis" class="section">
        <h2>Position Analysis</h2>
        <div class="plot-container">
          <div id="stock-proportions" class="plot-half">
            <h3>Stock Proportions</h3>
            {stock_proportions_plot}
          </div>
          <div id="sector-proportions" class="plot-half">
            <h3>Sector Proportions</h3>
            {sector_proportions_plot}
          </div>
        </div>
        <div id="stock-proportion-over-time" class="plot-full">
          <h3>Asset Allocation Over Time</h3>
          {asset_allocation_over_time_plot}
        </div>
      </div>

      <div id="current-portfolio" class="section">
        <h2>Current Portfolio</h2>
        <div id="portfolio-table">{portfolio_table}</div>
      </div>

      <div id="closed-positions" class="section">
        <h2>Closed Positions</h2>
        <div id="closed-positions-table">{closed_positions_table}</div>
      </div>

      <div id="partially-sold-positions" class="section">
        <h2>Partially Sold Positions</h2>
        <div id="partially-sold-positions-table">
          {partially_sold_positions_table}
        </div>
      </div>
    </div>
  </body>
</html>
