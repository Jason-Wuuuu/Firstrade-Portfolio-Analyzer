<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfolio Analysis Report - {date}</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
      /* CSS_PLACEHOLDER */
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Portfolio Analysis Report {date}</h1>

      <div id="portfolio-growth" class="plot section">
        <h2>Portfolio Growth</h2>
        <div class="plot-scroll-container wide-plot">
          {portfolio_growth_plot}
        </div>
      </div>

      <div id="portfolio-analysis" class="section">
        <h2>Portfolio Summary</h2>
        <div id="portfolio-summary">
          <table class="summary-table">
            <tr>
              <th>Metric</th>
              <th>Value</th>
            </tr>
            <tr>
              <td>Total Value</td>
              <td>{total_value}</td>
            </tr>
            <tr>
              <td>Total Market Value</td>
              <td>{total_market_value}</td>
            </tr>
            <tr>
              <td>Cash</td>
              <td>{cash}</td>
            </tr>
            <tr>
              <td>Total Deposits</td>
              <td>{total_deposits}</td>
            </tr>
            <!-- <tr>
              <td>Unrealized P/L</td>
              <td>{unrealized_pnl}</td>
            </tr>
            <tr>
              <td>Realized P/L</td>
              <td>{total_realized_pnl}</td>
            </tr> -->
            <tr>
              <td>Total P/L</td>
              <td>{total_pnl}</td>
            </tr>
            <tr>
              <td>Daily Change</td>
              <td>{daily_change}</td>
            </tr>
          </table>
        </div>
      </div>

      <div id="position-analysis" class="section">
        <h2>Position Analysis</h2>
        <div class="plot-container">
          <div id="stock-proportions" class="plot-item">
            <h3>Stock Proportions</h3>
            <div class="plot-scroll-container">{stock_proportions_plot}</div>
          </div>
          <div id="sector-proportions" class="plot-item">
            <h3>Sector Proportions</h3>
            <div class="plot-scroll-container">{sector_proportions_plot}</div>
          </div>
        </div>
        <div id="stock-proportion-over-time" class="plot-item">
          <h3>Asset Allocation Over Time</h3>
          <div class="plot-scroll-container">
            {asset_allocation_over_time_plot}
          </div>
        </div>
      </div>

      <div id="current-portfolio" class="section">
        <h2>Holdings</h2>
        <div class="table-wrapper">
          <div id="portfolio-table">{portfolio_table}</div>
        </div>
      </div>

      <div id="closed-positions" class="section">
        <h2>Closed Positions</h2>
        <div class="table-wrapper">
          <div id="closed-positions-table">{closed_positions_table}</div>
        </div>
      </div>

      <div id="partially-sold-positions" class="section">
        <h2>Partially Sold Positions</h2>
        <div class="table-wrapper">
          <div id="partially-sold-positions-table">
            {partially_sold_positions_table}
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
